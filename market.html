<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Market Prices - Agri1</title>

    <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <!-- CSS -->
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="market.css">
    <link rel="apple-touch-icon" sizes="180x180" href="favicon_io/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon_io/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon_io/favicon-16x16.png">
    <link rel="manifest" href="manifest.json">
</head>

<body>

    <!-- Top Bar -->
    <div class="top-bar">
        <div class="container">
            <button id="header-download-btn" class="btn"
                style="background:white; color:var(--primary); padding:0.3rem 0.8rem; font-size:0.85rem; border-radius:20px; border:none; font-weight:600; cursor:pointer;">
                <i class="fas fa-download"></i> Download App
            </button>
        </div>
    </div>

    <!-- Main Header -->
    <header class="main-header">
        <div class="container header-inner">
            <a href="index.html" class="logo">
                <i class="fas fa-leaf"></i>
                <span>Agri<span>1</span></span>
            </a>

            <!-- Desktop Nav -->
            <nav class="nav-menu">
                <a href="index.html" class="nav-link">Home</a>
                <a href="weather.html" class="nav-link">Weather</a>
                <a href="market.html" class="nav-link active">Market</a>
                <a href="assistant.html" class="nav-link">AI Assistant</a>
                <a href="about.html" class="nav-link">About</a>
                <a href="login.html" class="btn btn-primary">Login</a>
            </nav>

            <!-- Mobile Toggle -->
            <button class="mobile-toggle">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </header>

    <!-- Search Section -->
    <section class="market-search-section">
        <div class="container">
            <h1 style="color:white; margin-bottom: var(--space-md);">Live Mandi Prices</h1>

            <div class="search-container">
                <div class="search-group">
                    <input type="text" id="crop-search" class="market-search-input"
                        placeholder="Search crop (e.g. Wheat, Tomato)">
                </div>
                <div class="search-group" style="flex: 0 0 200px;">
                    <select id="state-filter" class="state-select">
                        <option value="">All States</option>
                        <!-- Populated by JS -->
                    </select>
                </div>
                <button id="search-btn-main" class="btn btn-primary" style="height: var(--touch-target);">
                    <i class="fas fa-search"></i> Search
                </button>
            </div>

            <div class="quick-chips">
                <span class="quick-chip" data-crop="Wheat">Wheat</span>
                <span class="quick-chip" data-crop="Rice">Rice</span>
                <span class="quick-chip" data-crop="Tomato">Tomato</span>
                <span class="quick-chip" data-crop="Onion">Onion</span>
                <span class="quick-chip" data-crop="Potato">Potato</span>
                <span class="quick-chip" data-crop="Cotton">Cotton</span>
            </div>
        </div>
    </section>

    <!-- Results Section -->
    <div class="container section" style="padding-top:0;">

        <!-- Loading State -->
        <div id="loading-state" class="state-message" style="display:none;">
            <i class="fas fa-spinner fa-spin" style="color: var(--primary);"></i>
            <h3>Fetching live prices...</h3>
        </div>

        <!-- Error State -->
        <div id="error-state" class="state-message" style="display:none;">
            <i class="fas fa-exclamation-triangle" style="color: var(--danger);"></i>
            <h3 id="error-message">Error loading data</h3>
        </div>

        <!-- Empty State -->
        <div id="empty-state" class="state-message">
            <i class="fas fa-search"></i>
            <h3>Search for a crop to see live prices</h3>
            <p>Select a chip above or type a crop name.</p>
        </div>

        <!-- Results Info -->
        <div id="results-bar" class="results-bar" style="display:none;">
            <div id="results-count"></div>
            <div id="results-date"></div>
        </div>

        <!-- AI Insights -->
        <div id="ai-insights" class="ai-insights-card" style="display:none;">
            <div style="font-weight:700; color:var(--primary); margin-bottom:var(--space-md);">
                <i class="fas fa-robot"></i> AI Market Analysis
            </div>
            <div id="ai-insights-body"></div>
        </div>

        <!-- Prices Grid -->
        <div id="prices-grid" class="prices-grid">
            <!-- Populated by JS -->
        </div>

    </div>

    <footer style="margin-top: auto; padding: 2rem 0; text-align: center; border-top: 1px solid var(--border);">
        <div class="container" style="opacity: 0.5; font-size: 0.9rem;">
            &copy; 2026 <span style="color:var(--secondary)">Agri1</span>. All rights reserved.
        </div>
    </footer>

    <!-- Scripts -->
    <div id="google_translate_element" style="display:none;"></div>
    <script src="common.js"></script>
    <script src="market.js"></script>

</body>

</html>
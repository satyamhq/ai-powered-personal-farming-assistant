<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Farming Assistant - Agri1</title>
    <meta name="description"
        content="Chat with Agri1 AI to get instant answers on crop diseases, pest control, market trends, and government schemes in your language.">

    <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <!-- CSS -->
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="assistant.css">
    <link rel="apple-touch-icon" sizes="180x180" href="favicon_io/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon_io/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon_io/favicon-16x16.png">
    <link rel="manifest" href="manifest.json">
</head>

<body style="height: 100vh; display: flex; flex-direction: column;">

    <!-- Top Bar -->
    <div class="top-bar">
        <div class="container">
            <button id="header-download-btn" class="btn"
                style="background:white; color:var(--primary); padding:0.3rem 0.8rem; font-size:0.85rem; border-radius:20px; border:none; font-weight:600; cursor:pointer;">
                <i class="fas fa-download"></i> Download App
            </button>
        </div>
    </div>

    <!-- Main Header -->
    <header class="main-header" style="flex-shrink: 0;">
        <div class="container header-inner">
            <a href="index.html" class="logo">
                <i class="fas fa-leaf"></i>
                <span>Agri<span>1</span></span>
            </a>

            <!-- Desktop Nav -->
            <nav class="nav-menu">
                <a href="index.html" class="nav-link">Home</a>
                <a href="weather.html" class="nav-link">Weather</a>
                <a href="market.html" class="nav-link">Market</a>
                <a href="assistant.html" class="nav-link active">AI Assistant</a>
                <a href="about.html" class="nav-link">About</a>
                <a href="login.html" class="btn btn-primary">Login</a>
            </nav>

            <!-- Mobile Toggle -->
            <button class="mobile-toggle">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </header>

    <!-- Chat Interface -->
    <main class="section" style="flex: 1; padding: var(--space-md) 0; overflow: hidden;">
        <div class="container" style="height: 100%;">
            <div class="chat-container">
                <div class="chat-header">
                    <h1>
                        <div class="ai-logo-container"
                            style="width: 40px; height: 40px; margin-right: 0; display: inline-flex; background: #fff;">
                            <i class="fas fa-robot ai-logo-icon" style="font-size: 20px; color: var(--primary);"></i>
                            <div class="ai-logo-leaf"
                                style="width: 16px; height: 16px; font-size: 10px; top: -2px; right: -2px; border: 2px solid white; background: var(--secondary); color: white;">
                                <i class="fas fa-leaf"></i>
                            </div>
                        </div>
                    </h1>
                    <p>Ask about crops, diseases, weather, or prices</p>
                </div>

                <div class="input-area">
                    <input type="text" id="user-input" placeholder="Type your question here... (e.g. 'Gehu ka bhav')"
                        autocomplete="off">
                    <button id="send-btn"><i class="fas fa-paper-plane"></i></button>
                </div>

                <div class="quick-prompts">
                    <button class="prompt-chip"
                        onclick="document.getElementById('user-input').value='Price of Tomato'; document.getElementById('send-btn').click();">ğŸ’°
                        Price of Tomato</button>
                    <button class="prompt-chip"
                        onclick="document.getElementById('user-input').value='Weather today'; document.getElementById('send-btn').click();">ğŸŒ¤ï¸
                        Weather</button>
                    <button class="prompt-chip"
                        onclick="document.getElementById('user-input').value='How to control whitefly?'; document.getElementById('send-btn').click();">ğŸ›
                        Pest Control</button>
                    <button class="prompt-chip"
                        onclick="document.getElementById('user-input').value='PM Kisan scheme details'; document.getElementById('send-btn').click();">ğŸ›ï¸
                        Schemes</button>
                </div>

                <div id="chat-messages" class="chat-messages">
                    <div class="message bot">
                        <strong>Namaste! ğŸ™ I am <span class="text-primary">Agri1</span> AI.</strong><br>
                        I can help you with:
                        <ul>
                            <li>ğŸŒ¾ Crop advice & cultivation</li>
                            <li>ğŸ’° Live Mandi prices (e.g. "Price of Wheat")</li>
                            <li>ğŸ› Pest & disease control</li>
                            <li>ğŸŒ¤ï¸ Weather forecast</li>
                            <li>ğŸ›ï¸ Government schemes</li>
                        </ul>
                        How can I help you today?
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Scripts -->
    <div id="google_translate_element" style="display:none;"></div>
    <script src="common.js"></script>
    <script src="assistant.js"></script>

    <!-- Handle URL params for auto-query -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const query = urlParams.get('q');
            if (query) {
                const input = document.getElementById('user-input');
                const btn = document.getElementById('send-btn');
                if (input && btn) {
                    input.value = query;
                    // Small delay to let everything load
                    setTimeout(() => btn.click(), 500);
                }
            }
        });
    </script>
</body>

</html>